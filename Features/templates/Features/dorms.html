{% extends './base.html' %}
{% load static %}
<!-- ANDY MADE THIS ONE-->
<title>{% block title %} Dorms {% endblock %}</title>
{% block content %}
<style>
    .supplies{
        min-height: min-content !important;
        min-width: min-content !important;
    }

    .card-img-top {
        width: auto;
        height: 8vw;
        object-fit: cover;
    }
    .container-fluid {
        min-height: 19rem;
    }
</style>
<script>
    function printPageArea(AreaID){
        var printContent = document.getElementById(AreaID).innerHTML;
        var originalContent = document.body.innerHTML;
        document.body.innerHTML = printContent;
        window.print();
        document.body.innerHTML = originalContent;
    }
    function toggleCheckbox(fieldName) {
        var checkbox = document.querySelector('input[name="' + fieldName + '"]');
        checkbox.checked = !checkbox.checked;
    }
</script>
<h2 class="font-weight-light m-2">View your housing options...</h2>
<!-- {% if current_dorm %} <h4 class="m-2"> Current housing choice: {{ current_dorm }}</h4> {% endif %} Return the dorm that is marked as "true" -->
<div class="container-fluid py-2" style="overflow: auto;">
    <!-- container-fluid is a full screen-width bootstrap container. the overflow lets you scroll horizontally -->
    <div class="d-flex flex-row flex-nowrap"> <!-- the flex-nowrap forces it to not to stack -->
        {% for dorm in dorms %}
        <div class="card m-2" style="min-width: 18rem;">
            <img src="{{ dorm.dormpic1.url }}" class="card-img-top" style="min-height: 10rem;">
            <div class="card-body">
            <h5 class="card-title">{{ dorm.dormtype }}</h5>
            <a href="{% url 'dormview' dorm.id %}" class="btn btn-primary">View Dorm</a>
            <a href="{% url 'dormview' dorm.id %}" class="stretched-link"></a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="m-2" id="insiderchecklist">
    <h2 class="font-weight-light m-2">Dorm Packing & Suggestions Checklist</h2>
    <form method="POST" action="{% url 'dorms' %}">
        {% csrf_token %}
        <ul class="list-group list-group-light">
            <!-- Assuming you have a variable named 'user_checklist' containing the UserChecklist instance in your view -->
            <!-- generated by chatgpt, I decided I don't want a complicated schema for what should be a fixed list-->
            <li class="list-group-item" onclick="toggleCheckbox('housing_registration')">
                <input type="checkbox" name="housing_registration" {% if checklist.housing_registration %}checked{% endif %}>
                <input type="hidden" name="housing_registration" value="off"> <!-- you need this here to POST an uncheck!-->
                <label for="housing_registration">Housing Registration</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('get_keys_from_housing')">
                <input type="checkbox" name="get_keys_from_housing" {% if checklist.get_keys_from_housing %}checked{% endif %}>
                <input type="hidden" name="get_keys_from_housing" value="off">
                <label for="get_keys_from_housing">Get keys from housing</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('bedding')">
                <input type="checkbox" name="bedding" {% if checklist.bedding %}checked{% endif %}>
                <input type="hidden" name="bedding" value="off">
                <label for="bedding">Bedding</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('lamps')">
                <input type="checkbox" name="lamps" {% if checklist.lamps %}checked{% endif %}>
                <input type="hidden" name="lamps" value="off">
                <label for="lamps">Lamps</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('wastebasket_and_trash_bag')">
                <input type="checkbox" name="wastebasket_and_trash_bag" {% if checklist.wastebasket_and_trash_bag %}checked{% endif %}>
                <input type="hidden" name="wastebasket_and_trash_bag" value="off">
                <label for="wastebasket_and_trash_bag">Wastebasket and trash bag</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('key_chain')">
                <input type="checkbox" name="key_chain" {% if checklist.key_chain %}checked{% endif %}>
                <input type="hidden" name="key_chain" value="off">
                <label for="key_chain">Key chain that you would bet $148 on (price of a lost key)</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('clothes_hangers')">
                <input type="checkbox" name="clothes_hangers" {% if checklist.clothes_hangers %}checked{% endif %}>
                <input type="hidden" name="clothes_hangers" value="off">
                <label for="clothes_hangers">Clothes hangers</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('clothing')">
                <input type="checkbox" name="clothing" {% if checklist.clothing %}checked{% endif %}>
                <input type="hidden" name="clothing" value="off">
                <label for="clothing">Clothing</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('bath_towel')">
                <input type="checkbox" name="bath_towel" {% if checklist.bath_towel %}checked{% endif %}>
                <input type="hidden" name="bath_towel" value="off">
                <label for="bath_towel">Bath towel</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('bathrobe')">
                <input type="checkbox" name="bathrobe" {% if checklist.bathrobe %}checked{% endif %}>
                <input type="hidden" name="bathrobe" value="off">
                <label for="bathrobe">Bathrobe</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('toiletries')">
                <input type="checkbox" name="toiletries" {% if checklist.toiletries %}checked{% endif %}>
                <input type="hidden" name="toiletries" value="off">
                <label for="toiletries">Toiletries</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('cleaning_supplies')">
                <input type="checkbox" name="cleaning_supplies" {% if checklist.cleaning_supplies %}checked{% endif %}>
                <input type="hidden" name="cleaning_supplies" value="off">
                <label for="cleaning_supplies">Cleaning Supplies</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('room_deodorizing_spray')">
                <input type="checkbox" name="room_deodorizing_spray" {% if checklist.room_deodorizing_spray %}checked{% endif %}>
                <input type="hidden" name="room_deodorizing_spray" value="off">
                <label for="room_deodorizing_spray">Room deodorizing spray</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('laundry_supplies')">
                <input type="checkbox" name="laundry_supplies" {% if checklist.laundry_supplies %}checked{% endif %}>
                <input type="hidden" name="laundry_supplies" value="off">
                <label for="laundry_supplies">Laundry supplies</label>
            </li>
            <li class="list-group-item" onclick="toggleCheckbox('school_supplies')">
                <input type="checkbox" name="school_supplies" {% if checklist.school_supplies %}checked{% endif %}>
                <input type="hidden" name="school_supplies" value="off">
                <label for="school_supplies">School Supplies</label>
            </li>
        </ul>
    <button class="btn btn-primary m-2" type="submit">Update Checklist</button>
</form>
<button class="btn btn-light m-1" onclick="printPageArea('insiderchecklist')">Print</button>
</div>

<!-- College Supplies Card -->
<div class="col-md-6">
<div class="card m-2">
    <div class="card-header">
        <h6 class="mb-0">College Supplies</h6>
    </div>
    <div class="supplies card-body">
        <h4>Amazon</h4>
        <li><a href="https://www.amazon.com/College-School-Supplies/s?k=College+School+Supplies" class="card-link">Amazon College School Supplies</a></li>
        <li><a href="https://www.amazon.com/College-Supply-List/s?k=College+Supply+List" class="card-link">Amazon College Supply List</a></li>
        <h4>Target</h4>
        <li><a href="https://www.target.com/c/school-office-supplies/-/N-5xsxr" class="card-link">Target School & Office Supplies</a></li>
        <li><a href="https://www.target.com/c/on-to-college/-/N-5q0g0" class="card-link">Target Dorm Supplies</a></li>
    </div>
</div>
</div>
{% endblock %}

